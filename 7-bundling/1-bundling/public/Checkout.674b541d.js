var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire286e;t.register("fZaw4",(function(e,n){var c,o,r,a,i;c=e.exports,Object.defineProperty(c,"__esModule",{value:!0,configurable:!0}),o=e.exports,r="default",a=()=>y,Object.defineProperty(o,r,{get:a,set:i,enumerable:!0,configurable:!0});var s=t("eOHur"),u=t("1GhVf");const d="pk_test_51Ls3YjJiFO7cOn9i5GWxoJdBk5iN6FnUgdaHgD2wBxN7bqVFfcMKXQI4v86fwqhxe4b8CjYOKZNjg2VrcU2yply200OxYQlFCt";async function l(){const e=document.getElementById("checkout");if(e&&e instanceof HTMLButtonElement){e.disabled=!0,e.style.cursor="not-allowed",e.style.opacity="0.5",e.textContent="Redirecting to Stripe... HOLD YOUR HORSES!";try{const e=await fetch("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({line_items:(console.log("createLineItems",u.cart),Object.keys(u.cart).map((t=>{const e=Number(t);return{price_data:{currency:"usd",product_data:{name:u.cart[e].product.title,images:[u.cart[e].product.images[0]]},unit_amount:100*u.cart[e].product.price},quantity:u.cart[e].quantity}}))),mode:"payment",success_url:"http://localhost:3001/success",cancel_url:"http://localhost:3001/cancel"})}),n=await e.json();console.log(n);const c=await async function(){return(await t("czkIn")).loadStripe(d)}();await(c?.redirectToCheckout({sessionId:n.session.id}))}catch(t){console.error("error",t),e.disabled=!1,e.style.cursor="pointer",e.style.opacity="1",e.textContent="Hmmm... Something went wrong. Try again?"}}}const p=()=>Object.keys(u.cart).map((t=>{const e=Number(t);return`\n      <div style="margin-bottom: 1rem;">\n      <a href="/product/${u.cart[e].product.id}">\n        <img src="${u.cart[e].product.images[0]}" />\n        <h2>${u.cart[e].product.title}</h2>\n      </a>\n        <span>$${u.cart[e].product.price}</span>\n        <span>Quantity: ${u.cart[e].quantity}</span>\n      </div>\n    `})).join("");function y(){(0,s.default)({component:`\n    <div>\n      <h1>Checkout</h1>\n      ${p()}\n      <p>Total: ${Object.keys(u.cart).reduce(((t,e)=>t+u.cart[Number(e)].product.price*u.cart[Number(e)].quantity),0)}</p>\n      <button id="checkout">Checkout (Redirect to Stripe)</button>\n    </div>\n`,callback:()=>document?.getElementById("checkout")?.addEventListener("click",l)})}})),t.register("czkIn",(function(e,n){e.exports=import("./"+t("27Lyk").resolve("4DaNn")).then((()=>t("3knZs")))}));
//# sourceMappingURL=Checkout.674b541d.js.map
