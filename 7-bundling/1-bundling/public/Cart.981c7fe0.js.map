{"mappings":"wZAAA,IAAAA,EAAAC,EAAA,S,0BAIeC,eAAAC,IACb,MAAMC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,SAAW,MACxDC,SAASC,MAAQ,OACjB,MAAMC,QAAiB,EAAAX,EAAAY,eACvB,GAAiC,IAA7BC,OAAOC,KAAKV,GAAMW,QACpB,EAAAC,EAAAC,SAAO,4GAIF,CACL,MAAMC,EAAYL,OAAOC,KAAKV,GAAMe,KAAKC,IACvC,MAAMC,EAAUV,EAASW,MAAMD,GAAYA,EAAQD,KAAOG,OAAOH,KACjE,GAAKC,EAIL,MAAO,kEAEaA,EAAQG,mBAAmBH,EAAQX,gCACzCW,EAAQX,iCACRW,EAAQI,yCACCrB,EAAKgB,GAAIM,oEACeL,EAAQD,mEATrD,EAAAO,EAAAV,SAAK,WAAY,IAWZ,KAET,EAAAD,EAAAC,SAAO,wCAECC,EAAUU,KAAK,oBAEvB,EAAAZ,EAAAa,qBACF,CACF,C,gJCpCA,IAAAF,EAAA1B,EAAA,SAGA,IAAI6B,EAAsB,GAE1B,MAAMC,EAAK7B,UACT,MAAM8B,QAAiBC,MAAM,kCAE7B,IAAKD,EAASE,GAGZ,OAFAC,MAAM,eAAiBH,EAASI,QAChCC,QAAQC,MAAMN,IACP,EAAAL,EAAAV,SAAK,WAAYe,EAASI,QAKnC,aAFmBJ,EAASO,MAErB,EAGFrC,eAAesC,IACpB,GAAIV,EAASf,OAAS,EAEpB,OADAsB,QAAQI,MAAM,2BACPX,EAET,MAAMY,QAAaX,IAEnB,OADAD,EAAWY,EAAK/B,SACTmB,CACT,CAEO5B,eAAeyC,EAAWvB,GAE/B,OADAU,QAAiBU,IACVV,EAASR,MAAMD,GAAYA,EAAQD,KAAOG,OAAOH,IAC1D,CAEO,SAASwB,IACd,MAAMC,EAAUpC,SAASqC,cAAc,OAEvC,OADAD,EAAQE,UAAUC,IAAI,WACfH,CACT,C,qECtCA,IAAA7B,EAAAf,EAAA,SAEe,SAAAgD,EAAc7B,EAAY8B,GAEvC,OADAzC,SAASC,MAAQ,MACTU,GACN,IAAK,SACH,EAAAJ,EAAAC,SACE,6EAA6EiC,WAE/E,MACF,IAAK,YACH,EAAAlC,EAAAC,SACE,kIAEF,MACF,IAAK,SACH,EAAAD,EAAAC,SAAO,6BAA6BiC,UACpC,MACF,SACE,EAAAlC,EAAAC,SACE,kCAAkCkC,SAASC,qDAGnD,C,sJCvBA,IAAAC,EAAApD,EAAA,S,uCAOe,SAAAqD,EAAgBC,GAC7B,IAAKC,EAAAC,KAAM,MAAM,IAAIC,MAAM,yBAC3BF,EAAAC,KAAKE,UAAYJ,CACnB,CAEOrD,eAAe0D,IACpB,MAAMjD,QAAiB,EAAAX,EAAAY,eAEQiD,MAAMC,KACnCrD,SAASsD,iBAAiB,iBAEpBC,SAASC,IACXA,EAAOC,eACXD,EAAOC,cAAe,EACtBD,EAAOE,iBAAiB,SAAUC,IAChC,MACMhD,EADSgD,EAAEC,OACCjD,GACZC,EAAUV,EAASW,MACtBD,GAAqBA,EAAQD,KAAOG,OAAOH,KAEzCC,GAIL,EAAAgC,EAAAiB,WAAUjD,IAHR,EAAAM,EAAAV,SAAK,QAASG,EAGN,IACZ,GAEJ,CAEOlB,eAAeqE,IACpB,MAAM5D,QAAiB,EAAAX,EAAAY,eACQiD,MAAMC,KACnCrD,SAASsD,iBAAiB,sBAEpBC,SAASC,IACXA,EAAOC,eACXD,EAAOC,cAAe,EACtBD,EAAOE,iBAAiB,SAAUC,IAChC,MACMhD,EADSgD,EAAEC,OACCjD,GACZC,EAAUV,EAASW,MAAMD,GAAYA,EAAQD,KAAOG,OAAOH,KAC5DC,GAIL,EAAAgC,EAAAmB,gBAAenD,IAHb,EAAAM,EAAAV,SAAK,QAASG,EAGD,IACjB,GAEJ,C,wKCvDA,IAAAqD,EAAAxE,EAAA,SAGO,IAAIyE,EAAcrE,KAAKC,MAAMC,aAAaC,QAAQ,SAAW,MAErD,SAAAmE,IACb,MAAMC,EAAYnE,SAASoE,cAAc,eACnCC,EAAarE,SAASoE,cAAc,eAC1C,IAAKD,IAAcE,EACjB,MAAM,IAAIpB,MAAM,sCAElBkB,EAAUG,UAAYlE,OAAOC,KAAK4D,GAAM3D,OAAOiE,WAC/CF,EAAWC,UACT,IACAlE,OAAOoE,OAAOP,GACXvD,KAAK+D,GAAmBA,EAAK7D,QAAQI,MAAQyD,EAAKxD,WAClDyD,QAAO,CAACC,EAAGC,IAAMD,EAAIC,GAAG,GACxBC,QAAQ,EACf,CAEO,SAASC,EAAUlE,GACpBqD,EAAKrD,EAAQD,IACfsD,EAAKrD,EAAQD,IAAIM,WAEjBgD,EAAKrD,EAAQD,IAAM,CACjBM,SAAU,E,QACVL,GAGJd,aAAaiF,QAAQ,OAAQnF,KAAKoF,UAAUf,IAC5CvC,MAAM,GAAGd,EAAQX,wBACjBiE,GACF,CAEO,SAASe,EAAerE,GAC7BqD,EAAKrD,EAAQD,IAAIM,WACiB,IAA9BgD,EAAKrD,EAAQD,IAAIM,iBACZgD,EAAKrD,EAAQD,IAEtBb,aAAaiF,QAAQ,OAAQnF,KAAKoF,UAAUf,IAC5CvC,MAAM,GAAGd,EAAQX,4BACjBiE,KACA,EAAAF,EAAAxD,UACF,C,iGC3CA,IAAA0E,EAAA1F,EAAA,S,uCAKO,MAAM2F,EAAOnF,SAASoE,cAAc,SAE5B,SAAAgB,EAAgBC,GAC7B,GAsFF,SAA4BA,GAC1B,IAAKA,EAAe,OACpB,OACGA,EAAcC,cACfD,EAAcE,YACdF,EAAcG,iBACdH,EAAcI,QAElB,CA9FMC,CAAmBL,GAErB,YADAzD,QAAQ+D,IAAI,sBAKd,MAAMC,EAAMP,EAAgBA,EAAcQ,YAAYD,IAAMlD,SAASoD,KAC/DC,EAAS,IAAIC,IAAIJ,GACjBK,EAAOF,EAAOpD,SACduD,EAAMlG,SAASoE,cAAc,OAC7B+B,EAAiC,SAAvBD,GAAKE,MAAMC,QACrBC,EAAaC,OAAOC,WAAW,sBAErC,GADAL,GAAWG,EAAWG,UAAYP,EAAIE,MAAMC,QAAU,QAClDhB,GAAiBY,IAASvD,SAASC,SAOrC,YANA0C,EAAcqB,UAAU,CACtBjH,gBACEiC,MAAM,gEACN2D,EAAcsB,gBAChB,IAKJ,MACMC,EADe,IAAIC,gBAAgBd,EAAOe,QACfC,IAAI,UAG/B3E,GAAU,EAAA7C,EAAAyH,iBACVC,EAAW9B,GAAMjC,WAAa,GAIpC,GAuCF,SACEgE,EACAD,EACA7E,EACA+E,GAEA,GAAID,GAASA,EAAMrB,YAAYD,MAAQlD,SAASoD,KAAM,OACtD,GAAIoB,GAASA,EAAMzB,SAAU,OAC7B2B,YAAW,KACLjC,GAAQ8B,IAAa9B,EAAKjC,YAC5BiC,EAAKjC,UAAYd,EAAQiF,UAAS,GAEnCF,EACL,CAvDEG,CAAoBjC,EAAe4B,EAAU7E,EAAS,KAGlDwE,GAAeW,EAAAT,kBAAkBU,iBAEnC,OADAD,EAAAT,OAAOW,MAAQb,GACR,EAAAW,EAAAG,iBAITrC,EACIA,EAAcqB,UAAU,CACtBjH,gBACE4F,EAAcsC,OAAOC,QAAU,KAC7BhG,QAAQ+D,IAAI,WACRR,GAAQ8B,IACV9B,EAAKjC,UAAY+D,EAAA,EAIrB,KAwFV,WACE,IAAKY,IAAiBC,EAAU,OAChCA,EAAS1B,MAAM2B,mBAAqB,aACtC,CA1FYC,GACAC,EAAiB,CACfC,UAAWzI,gBACH,EAAAyF,EAAAiD,OAAMlC,GAyF5B,WACE,IAAK4B,EAAc,OACnB,MAAMO,EAAWpI,SAASoE,cAAc,OACpCgE,IACFA,EAAS9F,UAAUC,IAAI,eACvB6F,EAAShC,MAAM2B,mBAAqB,cAExC,CA/FgBM,EAAA,GAGN,CAAE,MAAOxG,GACPD,QAAQC,MAAM,QAASA,IACvB,EAAAX,EAAAV,SAAK,QAASqB,EAAiByG,QACjC,CACF,IAEFL,EAAiB,CACfC,UAAWzI,gBACH,EAAAyF,EAAAiD,OAAMlC,EAAA,GAGtB,CA6BA,SAASgC,GAAiBM,eACxBA,GAAiB,EAAKC,WACtBA,EAAa,GAAEN,UACfA,EAAY,WAEZ,GAAIK,IAAmBvI,SAASyI,oBAAqB,CACnD,MAAMC,EAAqBC,QAAQC,QAAQV,KAE3C,MAAO,CACLW,MAAOF,QAAQG,OAAO7F,MAAM,iC,mBAC5ByF,EACAK,SAAUL,EAEd,CAGA,OAFmB1I,SAASyI,oBAAoBP,EAGlD,CA5CA3B,OAAOyC,WAAWtF,iBAAiB,WAAY0B,GA8C/C,IAAIyC,GAAe,EACfC,EAAW,KAEf9H,SAAS0D,iBAAiB,SAAUC,IAClC,MAAMsF,EAAUtF,EAAEC,OAClB,GACsB,QAApBqF,EAAQC,SACRD,EAAQE,sBAAsBC,kBAG9B,GADAvB,GAAe,EACS,QAApBoB,EAAQC,QACVpB,EAAWmB,MACN,CACL,MAAMI,EAAQJ,EAAQE,YAAY/E,cAAc,OAC5CiF,IAAOvB,EAAWuB,EACxB,MAEAxB,GAAe,CAAK,G,mEC5IxB,IAAA3G,EAAA1B,EAAA,SAEA,MAAM8J,EAAU,CACdC,KAAM,IAAM/J,EAAA,SACZgK,MAAO,IAAMhK,EAAA,SACbU,SAAU,IAAMV,EAAA,SAChBiK,YAAa,IAAMjK,EAAA,SACnBG,KAAM,IAAMH,EAAA,SACZkK,SAAU,IAAMlK,EAAA,SAChBmK,QAAS,IAAMnK,EAAA,SACfoK,OAAQ,IAAMpK,EAAA,UASVqK,EAAS,CACb,CAAE5D,KAAM,IAAKnD,UAAW,QACxB,CAAEmD,KAAM,SAAUnD,UAAW,SAC7B,CAAEmD,KAAM,YAAanD,UAAW,YAChC,CAAEmD,KAAM,WAAYnD,UAAW,cAAegH,SAAS,GACvD,CAAE7D,KAAM,QAASnD,UAAW,QAC5B,CAAEmD,KAAM,YAAanD,UAAW,YAChC,CAAEmD,KAAM,WAAYnD,UAAW,WAC/B,CAAEmD,KAAM,UAAWnD,UAAW,WAGzBrD,eAAesK,EAAM9D,GAC1B,MAAM+D,EAAQH,EAAOhJ,MAClBmJ,GAAUA,EAAM/D,KAAKgE,MAAM,KAAK,KAAOhE,EAAKgE,MAAM,KAAK,KAE1D,IAAKD,EAEH,YADA,EAAA9I,EAAAV,SAAK,MAAOyF,GAId,MAAMnD,QAAkBwG,EAAQU,EAAMlH,aAEtC,GAAIkH,EAAMF,QAAS,CACjB,MAAMnJ,EAAKsF,EAAKgE,MAAM,KAAKhE,EAAKgE,MAAM,KAAK3J,OAAS,GACpD,OAAOwC,EAAUtC,QAAQG,EAC3B,CACA,OAAOmC,EAAUtC,SACnB,C,sCC9CA0J,EAAAC,QAAiBxB,QAAQyB,IAAI,CAACC,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,UAAWyB,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,YAAY0B,MAAK,IAAM9K,EAAc,U,sCCsB5N,IAAA+K,EACAC,E,iFArBA,IAAIC,EAAU,CAAC,EAoBfF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIrK,EAAOD,OAAOC,KAAKqK,GAEdC,EAAI,EAAGA,EAAItK,EAAKC,OAAQqK,IAC/BF,EAAQpK,EAAKsK,IAAMD,EAAMrK,EAAKsK,GAElC,EAaAH,EAXA,SAAiB7J,GACf,IAAIiK,EAAWH,EAAQ9J,GAEvB,GAAgB,MAAZiK,EACF,MAAM,IAAI3H,MAAM,oCAAsCtC,GAGxD,OAAOiK,CACT,C,sCCpBAV,EAAAC,QAAiBxB,QAAQyB,IAAI,CAACC,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,UAAWyB,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,YAAY0B,MAAK,IAAM9K,EAAc,U,sCCA5N0K,EAAAC,QAAiBxB,QAAQyB,IAAI,CAACC,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,UAAWyB,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,YAAY0B,MAAK,IAAM9K,EAAc,U,sCCA5N0K,EAAAC,QAAiBxB,QAAQyB,IAAI,CAACC,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,UAAWyB,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,YAAY0B,MAAK,IAAM9K,EAAc,U,sCCA5N0K,EAAAC,QAAiBE,OAAoB,KAAO7K,EAAA,SAAAoJ,QAA6C,UAAW0B,MAAK,IAAM9K,EAAc,U,sCCA7H0K,EAAAC,QAAiBxB,QAAQyB,IAAI,CAACC,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,UAAWyB,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,YAAY0B,MAAK,IAAM9K,EAAc,U,sCCA5N0K,EAAAC,QAAiBxB,QAAQyB,IAAI,CAACC,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,UAAWyB,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,YAAY0B,MAAK,IAAM9K,EAAc,U,sCCA5N0K,EAAAC,QAAiBxB,QAAQyB,IAAI,CAACC,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,UAAWyB,OAAmB,KAAO7K,EAAA,SAAAoJ,QAA6C,YAAY0B,MAAK,IAAM9K,EAAc,U,+ICA5N,IAAAe,EAAAf,EAAA,S,0BAIO,MAAMqL,EAAS7K,SAASoE,cAAc,WAEtC,SAAS0G,IACd,IAAKD,EAAQ,MAAM,IAAI5H,MAAM,2BAC7B4H,EAAOnH,iBAAiB,QAASqH,EACnC,CAEOtL,eAAesL,IACpB,MAAM7K,QAAiB,EAAAX,EAAAY,eACjByG,EAAciE,EAAOpD,MAC3BzH,SAASC,MAAQ,mBAAqB2G,EACtC,MAAMoE,EAAmB9K,EAAS+K,QAAQrK,GACjCA,EAAQX,MAAMiL,cAAcC,SAASvE,EAAYsE,iBAE1D,GAAgC,IAA5BF,EAAiB1K,QACnB,EAAAC,EAAAC,SAAO,iDACF,CACL,MAAM4K,EAAeJ,EAAiBtK,IAAI2K,EAAA7K,SAAkBW,KAAK,KACjE,EAAAZ,EAAAC,SAAO,oBAAoB4K,MAC3B,EAAA7K,EAAA+K,kBACF,CACF,C,sCCvBe,SAAAC,EAA0B3K,GACvC,MAAO,0CAC8BA,EAAQD,wCACdC,EAAQD,kCACbC,EAAQG,mBAAmBH,EAAQX,8CAC3CW,EAAQX,oDAETW,EAAQ4K,sCACP5K,EAAQI,4DACoBJ,EAAQD,wGAIxD,C","sources":["src/pages/Cart.ts","src/components/store.ts","src/pages/Nope.ts","src/components/render.ts","src/features/cart.ts","src/components/Router.ts","src/components/Routes.ts","node_modules/@parcel/runtime-js/lib/runtime-fd03351a2faae3ef.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-01d085a28c31f7f3.js","node_modules/@parcel/runtime-js/lib/runtime-f3ad405aba58fac8.js","node_modules/@parcel/runtime-js/lib/runtime-998da71027436d52.js","node_modules/@parcel/runtime-js/lib/runtime-56442b748174209d.js","node_modules/@parcel/runtime-js/lib/runtime-9def6464f4c1eadd.js","node_modules/@parcel/runtime-js/lib/runtime-6f5df312da56292e.js","node_modules/@parcel/runtime-js/lib/runtime-12127860bacf528a.js","src/features/search.ts","src/components/Product.ts"],"sourcesContent":["import { getProducts } from \"../components/store\"\r\nimport render, { buttonFinderRemove } from \"../components/render\"\r\nimport Nope from \"./Nope\"\r\n\r\nexport default async function Cart() {\r\n  const cart = JSON.parse(localStorage.getItem(\"cart\") || \"{}\")\r\n  document.title = \"Cart\"\r\n  const products = await getProducts()\r\n  if (Object.keys(cart).length === 0) {\r\n    render(`\r\n          <h1>Cart</h1>\r\n          <p>Your cart is empty. Go buy some weird stuff!</p>\r\n          `)\r\n  } else {\r\n    const cartItems = Object.keys(cart).map((id) => {\r\n      const product = products.find((product) => product.id === Number(id))\r\n      if (!product) {\r\n        Nope(\"badFetch\", 404)\r\n        return\r\n      }\r\n      return `\r\n            <div class=\"cart-item\">\r\n              <img src=\"${product.thumbnail}\" alt=\"${product.title}\" />\r\n              <h2>${product.title}</h2>\r\n              <p>$${product.price}</p>\r\n              <p>Quantity: ${cart[id].quantity}</p>\r\n              <button class=\"remove-from-cart\" id=\"${product.id}\">Remove from cart</button>\r\n            </div>\r\n            `\r\n    })\r\n    render(`\r\n          <h1>Cart</h1>\r\n          ${cartItems.join(\"\")}\r\n          `)\r\n    buttonFinderRemove()\r\n  }\r\n}\r\n","import Nope from \"../pages/Nope\"\r\nimport { Product } from \"../types\"\r\n\r\nlet products: Product[] = []\r\n\r\nconst db = async () => {\r\n  const response = await fetch(\"https://dummyjson.com/products\")\r\n\r\n  if (!response.ok) {\r\n    alert(\"HTTP-Error: \" + response.status)\r\n    console.error(response)\r\n    return Nope(\"badFetch\", response.status)\r\n  }\r\n\r\n  const data = await response.json()\r\n\r\n  return data\r\n}\r\n\r\nexport async function getProducts() {\r\n  if (products.length > 0) {\r\n    console.trace(\"products already loaded\")\r\n    return products\r\n  }\r\n  const data = await db()\r\n  products = data.products as Product[]\r\n  return products\r\n}\r\n\r\nexport async function getProduct(id: string) {\r\n  products = await getProducts()\r\n  return products.find((product) => product.id === Number(id))\r\n}\r\n\r\nexport function createSpinner() {\r\n  const spinner = document.createElement(\"div\")\r\n  spinner.classList.add(\"spinner\")\r\n  return spinner\r\n}\r\n","import render from \"../components/render\"\r\n\r\nexport default function Nope(id: string, prop?: string | number) {\r\n  document.title = \"404\"\r\n  switch (id) {\r\n    case \"badID\":\r\n      render(\r\n        `<h1>404</h1><h2>Sorry buddy, but I don't think we have a product with id #${prop}.</h2>`\r\n      )\r\n      break\r\n    case \"badFetch\":\r\n      render(\r\n        `<h1>404</h1><h2>Dang, either the server is down or someone misspelled a URL. Whatever it is, it's probably Jesse's fault.</h2>`\r\n      )\r\n      break\r\n    case \"error\":\r\n      render(`<h1>That's Weird!</h1><h4>${prop}</h4>`)\r\n      break\r\n    default:\r\n      render(\r\n        `<h1>404</h1><h2>Huh, you're at ${location.pathname}, but you really shouldn't be... 🤔 </h2>`\r\n      )\r\n  }\r\n}\r\n","import { addToCart, removeFromCart } from \"../features/cart\"\r\nimport { getProducts } from \"./store\"\r\nimport { main } from \"./Router\"\r\nimport Nope from \"../pages/Nope\"\r\n\r\nimport type { Product, FancyButton } from \"../types\"\r\n\r\nexport default function render(component: string) {\r\n  if (!main) throw new Error(\"No main element found\")\r\n  main.innerHTML = component\r\n}\r\n\r\nexport async function buttonFinderAdd() {\r\n  const products = await getProducts()\r\n\r\n  const buttons: FancyButton[] = Array.from(\r\n    document.querySelectorAll(\".add-to-cart\")\r\n  )\r\n  buttons.forEach((button) => {\r\n    if (button.alreadyAdded) return\r\n    button.alreadyAdded = true\r\n    button.addEventListener(\"click\", (e) => {\r\n      const target = e.target as HTMLButtonElement\r\n      const id = target.id\r\n      const product = products.find(\r\n        (product: Product) => product.id === Number(id)\r\n      )\r\n      if (!product) {\r\n        Nope(\"badID\", id)\r\n        return\r\n      }\r\n      addToCart(product)\r\n    })\r\n  })\r\n}\r\n\r\nexport async function buttonFinderRemove() {\r\n  const products = await getProducts()\r\n  const buttons: FancyButton[] = Array.from(\r\n    document.querySelectorAll(\".remove-from-cart\")\r\n  )\r\n  buttons.forEach((button) => {\r\n    if (button.alreadyAdded) return\r\n    button.alreadyAdded = true\r\n    button.addEventListener(\"click\", (e) => {\r\n      const target = e.target as HTMLButtonElement\r\n      const id = target.id\r\n      const product = products.find((product) => product.id === Number(id))\r\n      if (!product) {\r\n        Nope(\"badID\", id)\r\n        return\r\n      }\r\n      removeFromCart(product)\r\n    })\r\n  })\r\n}\r\n","import Cart from \"../pages/Cart\"\r\nimport type { Cart as ICart, CartItem, Product } from \"../types\"\r\n\r\nexport let cart: ICart = JSON.parse(localStorage.getItem(\"cart\") || \"{}\")\r\n\r\nexport default function updateCart() {\r\n  const cartCount = document.querySelector(\"#cart-count\") as HTMLSpanElement\r\n  const cartAmount = document.querySelector(\"#cart-total\") as HTMLSpanElement\r\n  if (!cartCount || !cartAmount) {\r\n    throw new Error(\"No cart count or cart amount found\")\r\n  }\r\n  cartCount.innerText = Object.keys(cart).length.toString()\r\n  cartAmount.innerText =\r\n    \"$\" +\r\n    Object.values(cart)\r\n      .map((item: CartItem) => item.product.price * item.quantity)\r\n      .reduce((a, b) => a + b, 0)\r\n      .toFixed(2)\r\n}\r\n\r\nexport function addToCart(product: Product) {\r\n  if (cart[product.id]) {\r\n    cart[product.id].quantity++\r\n  } else {\r\n    cart[product.id] = {\r\n      quantity: 1,\r\n      product,\r\n    }\r\n  }\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n  alert(`${product.title} added to cart!`)\r\n  updateCart()\r\n}\r\n\r\nexport function removeFromCart(product: Product) {\r\n  cart[product.id].quantity--\r\n  if (cart[product.id].quantity === 0) {\r\n    delete cart[product.id]\r\n  }\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n  alert(`${product.title} removed from cart!`)\r\n  updateCart()\r\n  Cart()\r\n}\r\n","import { Route } from \"./Routes\"\r\nimport { searchHandler, search } from \"../features/search\"\r\nimport { createSpinner } from \"./store\"\r\nimport Nope from \"../pages/Nope\"\r\n\r\nexport const main = document.querySelector(\".main\")\r\n\r\nexport default function Router(navigateEvent?: NavigateEvent) {\r\n  if (shouldNotIntercept(navigateEvent)) {\r\n    console.log(\"shouldNotIntercept\")\r\n    return\r\n  }\r\n\r\n  // Get URL\r\n  const url = navigateEvent ? navigateEvent.destination.url : location.href\r\n  const newURL = new URL(url)\r\n  const path = newURL.pathname\r\n  const nav = document.querySelector(\"nav\")\r\n  const navOpen = nav?.style.display === \"flex\"\r\n  const mediaQuery = window.matchMedia(\"(max-width: 768px)\")\r\n  navOpen && mediaQuery.matches && (nav.style.display = \"none\")\r\n  if (navigateEvent && path === location.pathname) {\r\n    navigateEvent.intercept({\r\n      async handler() {\r\n        alert(\"We're already here! Silly Billy! *honk honk* 🤡 (that's you)\")\r\n        navigateEvent.preventDefault()\r\n      },\r\n    })\r\n    return\r\n  }\r\n\r\n  const searchParams = new URLSearchParams(newURL.search)\r\n  const searchValue = searchParams.get(\"search\")\r\n\r\n  // Start Spinner\r\n  const spinner = createSpinner()\r\n  const mainHTML = main?.innerHTML || \"\"\r\n  checkAndReplaceHTML(navigateEvent, mainHTML, spinner, 300)\r\n\r\n  // Check for search\r\n  if (searchValue && search instanceof HTMLInputElement) {\r\n    search.value = searchValue\r\n    return searchHandler()\r\n  }\r\n\r\n  // Route\r\n  navigateEvent\r\n    ? navigateEvent.intercept({\r\n        async handler() {\r\n          navigateEvent.signal.onabort = () => {\r\n            console.log(\"aborted\")\r\n            if (main && mainHTML) {\r\n              main.innerHTML = mainHTML\r\n            }\r\n          }\r\n\r\n          try {\r\n            addOldActiveClass()\r\n            transitionHelper({\r\n              updateDOM: async () => {\r\n                await Route(path)\r\n                addNewActiveClass()\r\n              },\r\n            })\r\n          } catch (error) {\r\n            console.error(\"error\", error)\r\n            Nope(\"error\", (error as Error).message)\r\n          }\r\n        },\r\n      })\r\n    : transitionHelper({\r\n        updateDOM: async () => {\r\n          await Route(path)\r\n        },\r\n      })\r\n}\r\n\r\nwindow.navigation.addEventListener(\"navigate\", Router)\r\n\r\nfunction checkAndReplaceHTML(\r\n  event: NavigateEvent | undefined,\r\n  mainHTML: string,\r\n  spinner: HTMLElement,\r\n  time: number\r\n) {\r\n  if (event && event.destination.url === location.href) return\r\n  if (event && event.formData) return\r\n  setTimeout(() => {\r\n    if (main && mainHTML === main.innerHTML) {\r\n      main.innerHTML = spinner.outerHTML\r\n    }\r\n  }, time)\r\n}\r\n\r\nfunction shouldNotIntercept(navigateEvent?: NavigateEvent) {\r\n  if (!navigateEvent) return\r\n  return (\r\n    !navigateEvent.canIntercept ||\r\n    navigateEvent.hashChange ||\r\n    navigateEvent.downloadRequest ||\r\n    navigateEvent.formData\r\n  )\r\n}\r\n\r\nfunction transitionHelper({\r\n  skipTransition = false,\r\n  classNames = [],\r\n  updateDOM = () => {},\r\n}) {\r\n  if (skipTransition || !document.startViewTransition) {\r\n    const updateCallbackDone = Promise.resolve(updateDOM())\r\n\r\n    return {\r\n      ready: Promise.reject(Error(\"View transitions unsupported\")),\r\n      updateCallbackDone,\r\n      finished: updateCallbackDone,\r\n    }\r\n  }\r\n  const transition = document.startViewTransition(updateDOM)\r\n\r\n  return transition\r\n}\r\n\r\nlet clickedImage = false\r\nlet oldImage = null as HTMLImageElement | null\r\n\r\ndocument.addEventListener(\"click\", (e) => {\r\n  const element = e.target as HTMLElement\r\n  if (\r\n    element.tagName === \"IMG\" ||\r\n    element.parentNode instanceof HTMLAnchorElement\r\n  ) {\r\n    clickedImage = true\r\n    if (element.tagName === \"IMG\") {\r\n      oldImage = element as HTMLImageElement\r\n    } else {\r\n      const image = element.parentNode?.querySelector(\"img\")\r\n      if (image) oldImage = image as HTMLImageElement\r\n    }\r\n  } else {\r\n    clickedImage = false\r\n  }\r\n})\r\n\r\nfunction addOldActiveClass() {\r\n  if (!clickedImage || !oldImage) return\r\n  oldImage.style.viewTransitionName = \"activeImage\"\r\n}\r\n\r\nfunction addNewActiveClass() {\r\n  if (!clickedImage) return\r\n  const newImage = document.querySelector(\"img\")\r\n  if (newImage) {\r\n    newImage.classList.add(\"activeImage\")\r\n    newImage.style.viewTransitionName = \"activeImage\"\r\n  }\r\n}\r\n","import Nope from \"../pages/Nope\"\r\n\r\nconst imports = {\r\n  home: () => import(\"../pages/Home\"),\r\n  about: () => import(\"../pages/About\"),\r\n  products: () => import(\"../pages/Products\"),\r\n  productpage: () => import(\"../pages/ProductPage\"),\r\n  cart: () => import(\"../pages/Cart\"),\r\n  checkout: () => import(\"../pages/Checkout\"),\r\n  success: () => import(\"../pages/Success\"),\r\n  events: () => import(\"../pages/Events\"),\r\n}\r\n\r\ninterface Route {\r\n  path: string\r\n  component: string\r\n  dynamic?: boolean\r\n}\r\n\r\nconst Routes = [\r\n  { path: \"/\", component: \"home\" },\r\n  { path: \"/about\", component: \"about\" },\r\n  { path: \"/products\", component: \"products\" },\r\n  { path: \"/product\", component: \"productpage\", dynamic: true },\r\n  { path: \"/cart\", component: \"cart\" },\r\n  { path: \"/checkout\", component: \"checkout\" },\r\n  { path: \"/success\", component: \"success\" },\r\n  { path: \"/events\", component: \"events\" },\r\n] as Route[]\r\n\r\nexport async function Route(path: string) {\r\n  const route = Routes.find(\r\n    (route) => route.path.split(\"/\")[1] === path.split(\"/\")[1]\r\n  )\r\n  if (!route) {\r\n    Nope(\"404\", path)\r\n    return\r\n  }\r\n\r\n  const component = await imports[route.component as keyof typeof imports]()\r\n\r\n  if (route.dynamic) {\r\n    const id = path.split(\"/\")[path.split(\"/\").length - 1]\r\n    return component.default(id)\r\n  }\r\n  return component.default()\r\n}\r\n","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"ir2Hu\"))]).then(() => parcelRequire('gBDbO'));","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"i1cH4\"))]).then(() => parcelRequire('fU7rG'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"8Gtxs\"))]).then(() => parcelRequire('2Rujx'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"jNhXN\"))]).then(() => parcelRequire('4Citp'));","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\"))).then(() => parcelRequire('aIKE6'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"lSbPr\"))]).then(() => parcelRequire('fZaw4'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"4PfOy\"))]).then(() => parcelRequire('4Pm74'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"8hHGh\"))]).then(() => parcelRequire('im2dl'));","import render, { buttonFinderAdd } from \"../components/render\"\r\nimport { getProducts } from \"../components/store\"\r\nimport ProductComponent from \"../components/Product\"\r\n\r\nexport const search = document.querySelector(\"#search\") as HTMLInputElement\r\n\r\nexport function searchListener() {\r\n  if (!search) throw new Error(\"No search element found\")\r\n  search.addEventListener(\"input\", searchHandler)\r\n}\r\n\r\nexport async function searchHandler() {\r\n  const products = await getProducts()\r\n  const searchValue = search.value\r\n  document.title = \"Search Page for \" + searchValue\r\n  const filteredProducts = products.filter((product) => {\r\n    return product.title.toLowerCase().includes(searchValue.toLowerCase())\r\n  })\r\n  if (filteredProducts.length === 0) {\r\n    render(`<h1>Products</h1><p>No Products Found</p>`)\r\n  } else {\r\n    const productsHTML = filteredProducts.map(ProductComponent).join(\"\")\r\n    render(`<h1>Products</h1>${productsHTML}`)\r\n    buttonFinderAdd()\r\n  }\r\n}\r\n","import { Product } from \"../types\"\r\n\r\nexport default function ProductComponent(product: Product) {\r\n  return `\r\n            <div class=\"product\" id=\"${product.id}\">\r\n              <a href=/product/${product.id}>\r\n                <img src=\"${product.thumbnail}\" alt=\"${product.title}\" loading=\"lazy\"/>\r\n              <h2>${product.title}</h2>\r\n              </a>\r\n              <p>${product.description}</p>\r\n              <p>$${product.price}</p>\r\n              <button class=\"add-to-cart\" id=\"${product.id}\">Add to cart</button>\r\n              <a href=\"/\">Back to home</a>\r\n            </div>\r\n            `\r\n}\r\n"],"names":["$4zybi","parcelRequire","async","$5a337395b9052bfe$export$2e2bcd8739ae039","cart","JSON","parse","localStorage","getItem","document","title","products","getProducts","Object","keys","length","$eOHur","default","cartItems","map","id","product","find","Number","thumbnail","price","quantity","$6trHI","join","buttonFinderRemove","$9f62b725e8071199$var$products","$9f62b725e8071199$var$db","response","fetch","ok","alert","status","console","error","json","$9f62b725e8071199$export$68a801b7b3c0bfaa","trace","data","$9f62b725e8071199$export$e2005c9600188ac7","$9f62b725e8071199$export$2342b8d835c798ac","spinner","createElement","classList","add","$dc1410702d496f1f$export$2e2bcd8739ae039","prop","location","pathname","$1GhVf","$f034656c1c6ff5c1$export$2e2bcd8739ae039","component","$loKau","main","Error","innerHTML","$f034656c1c6ff5c1$export$cc8a2c077702c36e","Array","from","querySelectorAll","forEach","button","alreadyAdded","addEventListener","e","target","addToCart","$f034656c1c6ff5c1$export$28a062edf2f82754","removeFromCart","$aIKE6","$d726bdfbfe7dbea8$export$e79499a77ba07702","$d726bdfbfe7dbea8$export$2e2bcd8739ae039","cartCount","querySelector","cartAmount","innerText","toString","values","item","reduce","a","b","toFixed","$d726bdfbfe7dbea8$export$576b6dd9d68b37bc","setItem","stringify","$d726bdfbfe7dbea8$export$afcd3788490386c5","$c9nz9","$e773eeb4c43845fc$export$f22da7240b7add18","$e773eeb4c43845fc$export$2e2bcd8739ae039","navigateEvent","canIntercept","hashChange","downloadRequest","formData","$e773eeb4c43845fc$var$shouldNotIntercept","log","url","destination","href","newURL","URL","path","nav","navOpen","style","display","mediaQuery","window","matchMedia","matches","intercept","preventDefault","searchValue","URLSearchParams","search","get","createSpinner","mainHTML","event","time","setTimeout","outerHTML","$e773eeb4c43845fc$var$checkAndReplaceHTML","$g2M5J","HTMLInputElement","value","searchHandler","signal","onabort","$e773eeb4c43845fc$var$clickedImage","$e773eeb4c43845fc$var$oldImage","viewTransitionName","$e773eeb4c43845fc$var$addOldActiveClass","$e773eeb4c43845fc$var$transitionHelper","updateDOM","Route","newImage","$e773eeb4c43845fc$var$addNewActiveClass","message","skipTransition","classNames","startViewTransition","updateCallbackDone","Promise","resolve","ready","reject","finished","navigation","element","tagName","parentNode","HTMLAnchorElement","image","$d165de4694e1e063$var$imports","home","about","productpage","checkout","success","events","$d165de4694e1e063$var$Routes","dynamic","$d165de4694e1e063$export$e7b0ac011bb776c6","route","split","module","exports","all","import","then","$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","i","resolved","$1ce8005e2310b062$export$d76128d007d19019","$1ce8005e2310b062$export$1fb3504cdb9493ae","$1ce8005e2310b062$export$c9a1649f3f80793f","filteredProducts","filter","toLowerCase","includes","productsHTML","$i2Q06","buttonFinderAdd","$bc2538e1600ac322$export$2e2bcd8739ae039","description"],"version":3,"file":"Cart.981c7fe0.js.map"}