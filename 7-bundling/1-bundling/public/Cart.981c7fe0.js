function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire286e;t.register("aIKE6",(function(r,n){var o;o=r.exports,Object.defineProperty(o,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",(()=>c));var a=t("4zybi"),i=t("eOHur"),s=t("6trHI");async function c(){const e=JSON.parse(localStorage.getItem("cart")||"{}");document.title="Cart";const t=await(0,a.getProducts)();if(0===Object.keys(e).length)(0,i.default)("\n          <h1>Cart</h1>\n          <p>Your cart is empty. Go buy some weird stuff!</p>\n          ");else{const r=Object.keys(e).map((r=>{const n=t.find((e=>e.id===Number(r)));if(n)return`\n            <div class="cart-item">\n              <img src="${n.thumbnail}" alt="${n.title}" />\n              <h2>${n.title}</h2>\n              <p>$${n.price}</p>\n              <p>Quantity: ${e[r].quantity}</p>\n              <button class="remove-from-cart" id="${n.id}">Remove from cart</button>\n            </div>\n            `;(0,s.default)("badFetch",404)}));(0,i.default)(`\n          <h1>Cart</h1>\n          ${r.join("")}\n          `),(0,i.buttonFinderRemove)()}}})),t.register("4zybi",(function(r,n){e(r.exports,"getProducts",(()=>s)),e(r.exports,"getProduct",(()=>c)),e(r.exports,"createSpinner",(()=>u));var o=t("6trHI");let a=[];const i=async()=>{const e=await fetch("https://dummyjson.com/products");if(!e.ok)return alert("HTTP-Error: "+e.status),console.error(e),(0,o.default)("badFetch",e.status);return await e.json()};async function s(){if(a.length>0)return console.trace("products already loaded"),a;const e=await i();return a=e.products,a}async function c(e){return a=await s(),a.find((t=>t.id===Number(e)))}function u(){const e=document.createElement("div");return e.classList.add("spinner"),e}})),t.register("6trHI",(function(r,n){e(r.exports,"default",(()=>a));var o=t("eOHur");function a(e,t){switch(document.title="404",e){case"badID":(0,o.default)(`<h1>404</h1><h2>Sorry buddy, but I don't think we have a product with id #${t}.</h2>`);break;case"badFetch":(0,o.default)("<h1>404</h1><h2>Dang, either the server is down or someone misspelled a URL. Whatever it is, it's probably Jesse's fault.</h2>");break;case"error":(0,o.default)(`<h1>That's Weird!</h1><h4>${t}</h4>`);break;default:(0,o.default)(`<h1>404</h1><h2>Huh, you're at ${location.pathname}, but you really shouldn't be... ðŸ¤” </h2>`)}}})),t.register("eOHur",(function(r,n){e(r.exports,"default",(()=>c)),e(r.exports,"buttonFinderAdd",(()=>u)),e(r.exports,"buttonFinderRemove",(()=>d));var o=t("1GhVf"),a=t("4zybi"),i=t("loKau"),s=t("6trHI");function c(e){if(!i.main)throw new Error("No main element found");i.main.innerHTML=e}async function u(){const e=await(0,a.getProducts)();Array.from(document.querySelectorAll(".add-to-cart")).forEach((t=>{t.alreadyAdded||(t.alreadyAdded=!0,t.addEventListener("click",(t=>{const r=t.target.id,n=e.find((e=>e.id===Number(r)));n?(0,o.addToCart)(n):(0,s.default)("badID",r)})))}))}async function d(){const e=await(0,a.getProducts)();Array.from(document.querySelectorAll(".remove-from-cart")).forEach((t=>{t.alreadyAdded||(t.alreadyAdded=!0,t.addEventListener("click",(t=>{const r=t.target.id,n=e.find((e=>e.id===Number(r)));n?(0,o.removeFromCart)(n):(0,s.default)("badID",r)})))}))}})),t.register("1GhVf",(function(r,n){e(r.exports,"cart",(()=>a)),e(r.exports,"default",(()=>i)),e(r.exports,"addToCart",(()=>s)),e(r.exports,"removeFromCart",(()=>c));var o=t("aIKE6");let a=JSON.parse(localStorage.getItem("cart")||"{}");function i(){const e=document.querySelector("#cart-count"),t=document.querySelector("#cart-total");if(!e||!t)throw new Error("No cart count or cart amount found");e.innerText=Object.keys(a).length.toString(),t.innerText="$"+Object.values(a).map((e=>e.product.price*e.quantity)).reduce(((e,t)=>e+t),0).toFixed(2)}function s(e){a[e.id]?a[e.id].quantity++:a[e.id]={quantity:1,product:e},localStorage.setItem("cart",JSON.stringify(a)),alert(`${e.title} added to cart!`),i()}function c(e){a[e.id].quantity--,0===a[e.id].quantity&&delete a[e.id],localStorage.setItem("cart",JSON.stringify(a)),alert(`${e.title} removed from cart!`),i(),(0,o.default)()}})),t.register("loKau",(function(r,n){e(r.exports,"main",(()=>c)),e(r.exports,"default",(()=>u));var o=t("c9nz9"),a=t("g2M5J"),i=t("4zybi"),s=t("6trHI");const c=document.querySelector(".main");function u(e){if(function(e){if(!e)return;return!e.canIntercept||e.hashChange||e.downloadRequest||e.formData}(e))return void console.log("shouldNotIntercept");const t=e?e.destination.url:location.href,r=new URL(t),n=r.pathname,u=document.querySelector("nav"),p="flex"===u?.style.display,h=window.matchMedia("(max-width: 768px)");if(p&&h.matches&&(u.style.display="none"),e&&n===location.pathname)return void e.intercept({async handler(){alert("We're already here! Silly Billy! *honk honk* ðŸ¤¡ (that's you)"),e.preventDefault()}});const m=new URLSearchParams(r.search).get("search"),y=(0,i.createSpinner)(),g=c?.innerHTML||"";if(function(e,t,r,n){if(e&&e.destination.url===location.href)return;if(e&&e.formData)return;setTimeout((()=>{c&&t===c.innerHTML&&(c.innerHTML=r.outerHTML)}),n)}(e,g,y,300),m&&a.search instanceof HTMLInputElement)return a.search.value=m,(0,a.searchHandler)();e?e.intercept({async handler(){e.signal.onabort=()=>{console.log("aborted"),c&&g&&(c.innerHTML=g)};try{!function(){if(!l||!f)return;f.style.viewTransitionName="activeImage"}(),d({updateDOM:async()=>{await(0,o.Route)(n),function(){if(!l)return;const e=document.querySelector("img");e&&(e.classList.add("activeImage"),e.style.viewTransitionName="activeImage")}()}})}catch(e){console.error("error",e),(0,s.default)("error",e.message)}}}):d({updateDOM:async()=>{await(0,o.Route)(n)}})}function d({skipTransition:e=!1,classNames:t=[],updateDOM:r=(()=>{})}){if(e||!document.startViewTransition){const e=Promise.resolve(r());return{ready:Promise.reject(Error("View transitions unsupported")),updateCallbackDone:e,finished:e}}return document.startViewTransition(r)}window.navigation.addEventListener("navigate",u);let l=!1,f=null;document.addEventListener("click",(e=>{const t=e.target;if("IMG"===t.tagName||t.parentNode instanceof HTMLAnchorElement)if(l=!0,"IMG"===t.tagName)f=t;else{const e=t.parentNode?.querySelector("img");e&&(f=e)}else l=!1}))})),t.register("c9nz9",(function(r,n){e(r.exports,"Route",(()=>s));var o=t("6trHI");const a={home:()=>t("6wNeX"),about:()=>t("c1qSj"),products:()=>t("dMRTY"),productpage:()=>t("hilYi"),cart:()=>t("eHkZZ"),checkout:()=>t("3K9pI"),success:()=>t("9sCUr"),events:()=>t("9MKKR")},i=[{path:"/",component:"home"},{path:"/about",component:"about"},{path:"/products",component:"products"},{path:"/product",component:"productpage",dynamic:!0},{path:"/cart",component:"cart"},{path:"/checkout",component:"checkout"},{path:"/success",component:"success"},{path:"/events",component:"events"}];async function s(e){const t=i.find((t=>t.path.split("/")[1]===e.split("/")[1]));if(!t)return void(0,o.default)("404",e);const r=await a[t.component]();if(t.dynamic){const t=e.split("/")[e.split("/").length-1];return r.default(t)}return r.default()}})),t.register("6wNeX",(function(e,r){e.exports=Promise.all([import("./"+t("27Lyk").resolve("h17xF")),import("./"+t("27Lyk").resolve("ir2Hu"))]).then((()=>t("gBDbO")))})),t.register("27Lyk",(function(t,r){var n,o;e(t.exports,"register",(()=>n),(e=>n=e)),e(t.exports,"resolve",(()=>o),(e=>o=e));var a={};n=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)a[t[r]]=e[t[r]]},o=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),t.register("c1qSj",(function(e,r){e.exports=Promise.all([import("./"+t("27Lyk").resolve("h17xF")),import("./"+t("27Lyk").resolve("i1cH4"))]).then((()=>t("fU7rG")))})),t.register("dMRTY",(function(e,r){e.exports=Promise.all([import("./"+t("27Lyk").resolve("h17xF")),import("./"+t("27Lyk").resolve("8Gtxs"))]).then((()=>t("2Rujx")))})),t.register("hilYi",(function(e,r){e.exports=Promise.all([import("./"+t("27Lyk").resolve("h17xF")),import("./"+t("27Lyk").resolve("jNhXN"))]).then((()=>t("4Citp")))})),t.register("eHkZZ",(function(e,r){e.exports=import("./"+t("27Lyk").resolve("h17xF")).then((()=>t("aIKE6")))})),t.register("3K9pI",(function(e,r){e.exports=Promise.all([import("./"+t("27Lyk").resolve("h17xF")),import("./"+t("27Lyk").resolve("lSbPr"))]).then((()=>t("fZaw4")))})),t.register("9sCUr",(function(e,r){e.exports=Promise.all([import("./"+t("27Lyk").resolve("h17xF")),import("./"+t("27Lyk").resolve("4PfOy"))]).then((()=>t("4Pm74")))})),t.register("9MKKR",(function(e,r){e.exports=Promise.all([import("./"+t("27Lyk").resolve("h17xF")),import("./"+t("27Lyk").resolve("8hHGh"))]).then((()=>t("im2dl")))})),t.register("g2M5J",(function(r,n){e(r.exports,"search",(()=>s)),e(r.exports,"searchListener",(()=>c)),e(r.exports,"searchHandler",(()=>u));var o=t("eOHur"),a=t("4zybi"),i=t("i2Q06");const s=document.querySelector("#search");function c(){if(!s)throw new Error("No search element found");s.addEventListener("input",u)}async function u(){const e=await(0,a.getProducts)(),t=s.value;document.title="Search Page for "+t;const r=e.filter((e=>e.title.toLowerCase().includes(t.toLowerCase())));if(0===r.length)(0,o.default)("<h1>Products</h1><p>No Products Found</p>");else{const e=r.map(i.default).join("");(0,o.default)(`<h1>Products</h1>${e}`),(0,o.buttonFinderAdd)()}}})),t.register("i2Q06",(function(t,r){function n(e){return`\n            <div class="product" id="${e.id}">\n              <a href=/product/${e.id}>\n                <img src="${e.thumbnail}" alt="${e.title}" loading="lazy"/>\n              <h2>${e.title}</h2>\n              </a>\n              <p>${e.description}</p>\n              <p>$${e.price}</p>\n              <button class="add-to-cart" id="${e.id}">Add to cart</button>\n              <a href="/">Back to home</a>\n            </div>\n            `}e(t.exports,"default",(()=>n))}));
//# sourceMappingURL=Cart.981c7fe0.js.map
