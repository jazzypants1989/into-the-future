{"mappings":"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","sources":["src/pages/Cart.ts","src/components/store.ts","src/pages/Nope.ts","src/components/render.ts","src/features/cart.ts","src/components/Router.ts","src/components/Routes.ts","node_modules/@parcel/runtime-js/lib/runtime-fd03351a2faae3ef.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-01d085a28c31f7f3.js","node_modules/@parcel/runtime-js/lib/runtime-f3ad405aba58fac8.js","node_modules/@parcel/runtime-js/lib/runtime-998da71027436d52.js","node_modules/@parcel/runtime-js/lib/runtime-56442b748174209d.js","node_modules/@parcel/runtime-js/lib/runtime-9def6464f4c1eadd.js","node_modules/@parcel/runtime-js/lib/runtime-6f5df312da56292e.js","node_modules/@parcel/runtime-js/lib/runtime-12127860bacf528a.js","src/features/search.ts","src/components/Product.ts"],"sourcesContent":["import { getProducts } from \"../components/store\"\r\nimport render, { buttonFinderRemove } from \"../components/render\"\r\nimport Nope from \"./Nope\"\r\n\r\nexport default async function Cart() {\r\n  const cart = JSON.parse(localStorage.getItem(\"cart\") || \"{}\")\r\n  document.title = \"Cart\"\r\n  const products = await getProducts()\r\n  if (Object.keys(cart).length === 0) {\r\n    render({\r\n      component: `\r\n          <h1>Cart</h1>\r\n          <p>Your cart is empty. Go buy some weird stuff!</p>\r\n          `,\r\n    })\r\n  } else {\r\n    const cartItems = Object.keys(cart).map((id) => {\r\n      const product = products.find((product) => product.id === Number(id))\r\n      if (!product) return Nope(\"badID\", id)\r\n      return `\r\n            <div class=\"product\">\r\n              <img src=\"${product?.thumbnail}\" alt=\"${product?.title}\" />\r\n              <h2>${product?.title}</h2>\r\n              <p>$${product?.price}</p>\r\n              <p>Quantity: ${cart[id].quantity}</p>\r\n              <button class=\"remove-from-cart\" id=\"${product?.id}\">Remove from cart</button>\r\n            </div>\r\n            `\r\n    })\r\n    render({\r\n      component: `\r\n          <h1>Cart</h1>\r\n          ${cartItems.join(\"\")}\r\n          `,\r\n      callback: buttonFinderRemove,\r\n    })\r\n  }\r\n}\r\n","import Nope from \"../pages/Nope\"\r\nimport { Product } from \"../types\"\r\n\r\nlet products: Product[] = []\r\n\r\nconst db = async () => {\r\n  const response = await fetch(\"https://dummyjson.com/products\")\r\n\r\n  if (!response.ok) {\r\n    alert(\"HTTP-Error: \" + response.status)\r\n    console.error(response)\r\n    return Nope(\"badFetch\", response.status)\r\n  }\r\n\r\n  const data = await response.json()\r\n\r\n  return data\r\n}\r\n\r\nexport async function getProducts() {\r\n  if (products.length > 0) {\r\n    console.trace(\"products already loaded\")\r\n    return products\r\n  }\r\n  const data = await db()\r\n  products = data.products as Product[]\r\n  return products\r\n}\r\n\r\nexport async function getProduct(id: string) {\r\n  products = await getProducts()\r\n  return products.find((product) => product.id === Number(id))\r\n}\r\n\r\nexport function createSpinner() {\r\n  const spinner = document.createElement(\"div\")\r\n  spinner.classList.add(\"spinner\")\r\n  return spinner\r\n}\r\n","import render from \"../components/render\"\r\n\r\nexport default function Nope(id: string, prop?: string | number) {\r\n  document.title = \"404\"\r\n  switch (id) {\r\n    case \"badID\":\r\n      render({\r\n        component: `<h1>404</h1><h2>Sorry buddy, but I don't think we have a product with id #${prop}.</h2>`,\r\n      })\r\n      break\r\n    case \"badFetch\":\r\n      render({\r\n        component: `<h1>404</h1><h2>Dang, either the server is down or someone misspelled a URL. Whatever it is, it's probably Jesse's fault.</h2>`,\r\n      })\r\n      break\r\n    case \"error\":\r\n      render({ component: `<h1>That's Weird!</h1><h4>${prop}</h4>` })\r\n      break\r\n    default:\r\n      render({\r\n        component: `<h1>404</h1><h2>Huh, you're at ${location.pathname}, but you really shouldn't be... 🤔 </h2>`,\r\n      })\r\n  }\r\n}\r\n","import { addToCart, removeFromCart } from \"../features/cart\"\r\nimport { getProducts } from \"./store\"\r\nimport { main } from \"./Router\"\r\nimport Nope from \"../pages/Nope\"\r\n\r\nimport type { Product, FancyButton } from \"../types\"\r\n\r\ninterface RenderProps {\r\n  component: string\r\n  callback?: () => void\r\n}\r\n\r\nexport default function render({ component, callback }: RenderProps) {\r\n  addOldActiveClass()\r\n  transitionHelper({\r\n    updateDOM: () => {\r\n      if (!main) throw new Error(\"No main element found\")\r\n      if (!component) Nope(\"error\", \"No component provided\")\r\n      main.innerHTML = component\r\n      main.scrollTop = 0\r\n      addNewActiveClass()\r\n      if (callback) callback()\r\n    },\r\n  })\r\n}\r\n\r\nexport async function buttonFinderAdd() {\r\n  const products = await getProducts()\r\n\r\n  const buttons: FancyButton[] = Array.from(\r\n    document.querySelectorAll(\".add-to-cart\")\r\n  )\r\n  buttons.forEach((button) => {\r\n    if (button.alreadyAdded) return\r\n    button.alreadyAdded = true\r\n    button.addEventListener(\"click\", (e) => {\r\n      const target = e.target as FancyButton\r\n      const id = target.id\r\n      const product = products.find(\r\n        (product: Product) => product.id === Number(id)\r\n      )\r\n      if (!product) {\r\n        Nope(\"badID\", id)\r\n        return\r\n      }\r\n      addToCart(product)\r\n    })\r\n  })\r\n}\r\n\r\nexport async function buttonFinderRemove() {\r\n  const products = await getProducts()\r\n  const buttons: FancyButton[] = Array.from(\r\n    document.querySelectorAll(\".remove-from-cart\")\r\n  )\r\n  buttons.forEach((button) => {\r\n    if (button.alreadyAdded) return\r\n    button.alreadyAdded = true\r\n    button.addEventListener(\"click\", (e) => {\r\n      const target = e.target\r\n      if (!target || !isFancyButton(target)) return\r\n      const id = target.id\r\n      const product = products.find((product) => product.id === Number(id))\r\n      if (!product) {\r\n        Nope(\"badID\", id)\r\n        return\r\n      }\r\n      removeFromCart(product)\r\n    })\r\n  })\r\n}\r\n\r\nfunction isFancyButton(target: EventTarget): target is FancyButton {\r\n  return \"alreadyAdded\" in target\r\n}\r\n\r\nfunction transitionHelper({\r\n  skipTransition = false,\r\n  classNames = [],\r\n  updateDOM = () => {},\r\n}) {\r\n  if (skipTransition || !document.startViewTransition) {\r\n    const updateCallbackDone = Promise.resolve(updateDOM())\r\n\r\n    return {\r\n      ready: Promise.reject(Error(\"View transitions unsupported\")),\r\n      updateCallbackDone,\r\n      finished: updateCallbackDone,\r\n    }\r\n  }\r\n  const transition = document.startViewTransition(updateDOM)\r\n\r\n  // transition.finished.finally(() => {\r\n  //   removeActiveClass()\r\n  // })\r\n\r\n  return transition\r\n}\r\n\r\nlet clickedImage = false\r\nlet oldImage = null as HTMLImageElement | null\r\n\r\ndocument.addEventListener(\"click\", (e) => {\r\n  const element = e.target as HTMLElement\r\n  if (\r\n    element.tagName === \"IMG\" ||\r\n    element.parentNode instanceof HTMLAnchorElement\r\n  ) {\r\n    clickedImage = true\r\n    if (element.tagName === \"IMG\") {\r\n      oldImage = element as HTMLImageElement\r\n    } else {\r\n      const image = element.parentNode?.querySelector(\"img\")\r\n      if (image) oldImage = image as HTMLImageElement\r\n    }\r\n  } else {\r\n    clickedImage = false\r\n  }\r\n})\r\n\r\nfunction addOldActiveClass() {\r\n  if (!clickedImage || !oldImage) return\r\n  oldImage.style.viewTransitionName = \"activeImage\"\r\n}\r\n\r\nfunction addNewActiveClass() {\r\n  if (!clickedImage) return\r\n  const newImage = document.querySelector(\"img\")\r\n  if (newImage) {\r\n    newImage.classList.add(\"activeImage\")\r\n    newImage.style.viewTransitionName = \"activeImage\"\r\n  }\r\n}\r\n","import Cart from \"../pages/Cart\"\r\nimport type { Cart as ICart, CartItem, Product } from \"../types\"\r\n\r\nexport let cart: ICart = JSON.parse(localStorage.getItem(\"cart\") || \"{}\")\r\n\r\nexport default function updateCart() {\r\n  const cartCount = document.querySelector(\"#cart-count\") as HTMLSpanElement\r\n  const cartAmount = document.querySelector(\"#cart-total\") as HTMLSpanElement\r\n  if (!cartCount || !cartAmount) {\r\n    throw new Error(\"No cart count or cart amount found\")\r\n  }\r\n  cartCount.innerText = Object.keys(cart).length.toString()\r\n  cartAmount.innerText =\r\n    \"$\" +\r\n    Object.values(cart)\r\n      .map((item: CartItem) => item.product.price * item.quantity)\r\n      .reduce((a, b) => a + b, 0)\r\n      .toFixed(2)\r\n}\r\n\r\nexport function addToCart(product: Product) {\r\n  if (cart[product.id]) {\r\n    cart[product.id].quantity++\r\n  } else {\r\n    cart[product.id] = {\r\n      quantity: 1,\r\n      product,\r\n    }\r\n  }\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n  alert(`${product.title} added to cart!`)\r\n  updateCart()\r\n}\r\n\r\nexport function removeFromCart(product: Product) {\r\n  cart[product.id].quantity--\r\n  if (cart[product.id].quantity === 0) {\r\n    delete cart[product.id]\r\n  }\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n  alert(`${product.title} removed from cart!`)\r\n  updateCart()\r\n  Cart()\r\n}\r\n","import { Route } from \"./Routes\"\r\nimport { searchHandler, search } from \"../features/search\"\r\nimport { createSpinner } from \"./store\"\r\nimport Nope from \"../pages/Nope\"\r\nimport render from \"./render\"\r\n\r\nexport const main = document.querySelector(\".main\")\r\n\r\nexport default async function Router(navigateEvent?: NavigateEvent) {\r\n  if (shouldNotIntercept(navigateEvent)) {\r\n    console.log(\"shouldNotIntercept\")\r\n    return\r\n  }\r\n\r\n  // Get URL\r\n  const url = navigateEvent ? navigateEvent.destination.url : location.href\r\n  const newURL = new URL(url)\r\n  const path = newURL.pathname\r\n  const nav = document.querySelector(\"nav\")\r\n  const navOpen = nav?.style.display === \"flex\"\r\n  const mediaQuery = window.matchMedia(\"(max-width: 768px)\")\r\n  navOpen && mediaQuery.matches && (nav.style.display = \"none\")\r\n  if (navigateEvent && path === location.pathname) {\r\n    navigateEvent.intercept({\r\n      async handler() {\r\n        alert(\"We're already here! Silly Billy! *honk honk* 🤡 (that's you)\")\r\n        navigateEvent.preventDefault()\r\n      },\r\n    })\r\n    return\r\n  }\r\n\r\n  const searchParams = new URLSearchParams(newURL.search)\r\n  const searchValue = searchParams.get(\"search\")\r\n\r\n  // Start Spinner\r\n  const spinner = createSpinner()\r\n  const mainHTML = main?.innerHTML || \"\"\r\n  checkAndReplaceHTML(navigateEvent, mainHTML, spinner, 300)\r\n\r\n  // Check for search\r\n  if (searchValue && search instanceof HTMLInputElement) {\r\n    search.value = searchValue\r\n    return searchHandler()\r\n  }\r\n\r\n  // Route\r\n  navigateEvent\r\n    ? navigateEvent.intercept({\r\n        scroll: \"manual\",\r\n        async handler() {\r\n          navigateEvent.signal.onabort = () => {\r\n            if (!main) return\r\n            main.innerHTML = mainHTML || \"\"\r\n          }\r\n\r\n          try {\r\n            await Route(path)\r\n          } catch (error) {\r\n            console.error(\"error\", error)\r\n            if (!main) return\r\n            Nope(\"error\", \"Something went wrong. Super helpful, I know.\")\r\n          }\r\n        },\r\n      })\r\n    : await Route(path)\r\n}\r\n\r\nwindow.navigation.addEventListener(\"navigate\", Router)\r\n\r\nfunction checkAndReplaceHTML(\r\n  event: NavigateEvent | undefined,\r\n  mainHTML: string,\r\n  spinner: HTMLElement,\r\n  time: number\r\n) {\r\n  if (event && event.formData) return\r\n  setTimeout(() => {\r\n    if (mainHTML === main?.innerHTML) {\r\n      if (!main) return\r\n      document.title = \"Loading...\"\r\n      const heading = document.createElement(\"h1\")\r\n      heading.textContent = \"Loading...\"\r\n      render({\r\n        component: heading.outerHTML + spinner.outerHTML,\r\n      })\r\n    }\r\n  }, time)\r\n}\r\n\r\nfunction shouldNotIntercept(navigateEvent?: NavigateEvent) {\r\n  if (!navigateEvent) return\r\n  return (\r\n    !navigateEvent.canIntercept ||\r\n    navigateEvent.hashChange ||\r\n    navigateEvent.downloadRequest ||\r\n    navigateEvent.formData\r\n  )\r\n}\r\n","import Nope from \"../pages/Nope\"\r\n\r\nconst imports = {\r\n  home: () => import(\"../pages/Home\"),\r\n  about: () => import(\"../pages/About\"),\r\n  products: () => import(\"../pages/Products\"),\r\n  productpage: () => import(\"../pages/ProductPage\"),\r\n  cart: () => import(\"../pages/Cart\"),\r\n  checkout: () => import(\"../pages/Checkout\"),\r\n  success: () => import(\"../pages/Success\"),\r\n  events: () => import(\"../pages/Events\"),\r\n}\r\n\r\ninterface Route {\r\n  path: string\r\n  component: string\r\n  dynamic?: boolean\r\n}\r\n\r\nconst Routes = [\r\n  { path: \"/\", component: \"home\" },\r\n  { path: \"/about\", component: \"about\" },\r\n  { path: \"/products\", component: \"products\" },\r\n  { path: \"/product\", component: \"productpage\", dynamic: true },\r\n  { path: \"/cart\", component: \"cart\" },\r\n  { path: \"/checkout\", component: \"checkout\" },\r\n  { path: \"/success\", component: \"success\" },\r\n  { path: \"/events\", component: \"events\" },\r\n] as Route[]\r\n\r\nexport async function Route(path: string) {\r\n  const route = Routes.find(\r\n    (route) => route.path.split(\"/\")[1] === path.split(\"/\")[1]\r\n  )\r\n  if (!route) {\r\n    Nope(\"404\", path)\r\n    return\r\n  }\r\n\r\n  const component = await imports[route.component as keyof typeof imports]()\r\n\r\n  if (route.dynamic) {\r\n    const id = path.split(\"/\")[path.split(\"/\").length - 1]\r\n    return component.default(id)\r\n  }\r\n  return component.default()\r\n}\r\n","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"ir2Hu\"))]).then(() => parcelRequire('gBDbO'));","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"i1cH4\"))]).then(() => parcelRequire('fU7rG'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"8Gtxs\"))]).then(() => parcelRequire('2Rujx'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"jNhXN\"))]).then(() => parcelRequire('4Citp'));","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\"))).then(() => parcelRequire('aIKE6'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"lSbPr\"))]).then(() => parcelRequire('fZaw4'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"4PfOy\"))]).then(() => parcelRequire('4Pm74'));","module.exports = Promise.all([__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"h17xF\")), __parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"8hHGh\"))]).then(() => parcelRequire('im2dl'));","import render, { buttonFinderAdd } from \"../components/render\"\r\nimport { getProducts } from \"../components/store\"\r\nimport ProductComponent from \"../components/Product\"\r\n\r\nexport const search = document.querySelector(\"#search\") as HTMLInputElement\r\n\r\nexport function searchListener() {\r\n  if (!search) throw new Error(\"No search element found\")\r\n  search.addEventListener(\"input\", searchHandler)\r\n}\r\n\r\nexport async function searchHandler() {\r\n  const products = await getProducts()\r\n  const searchValue = search.value\r\n  document.title = \"Search Page for \" + searchValue\r\n  const filteredProducts = products.filter((product) => {\r\n    return product.title.toLowerCase().includes(searchValue.toLowerCase())\r\n  })\r\n  if (filteredProducts.length === 0) {\r\n    render({ component: `<h1>Products</h1><p>No Products Found</p>` })\r\n  } else {\r\n    const productsHTML = filteredProducts.map(ProductComponent).join(\"\")\r\n    render({\r\n      component: `<h1>Products</h1>${productsHTML}`,\r\n      callback: buttonFinderAdd,\r\n    })\r\n  }\r\n}\r\n","import { Product } from \"../types\"\r\n\r\nexport default function ProductComponent(product: Product) {\r\n  return `\r\n            <div class=\"product\" id=\"${product.id}\">\r\n              <a href=/product/${product.id}>\r\n                <img src=\"${product.thumbnail}\" alt=\"${product.title}\" loading=\"lazy\"/>\r\n              <h2>${product.title}</h2>\r\n              </a>\r\n              <p>${product.description}</p>\r\n              <p>$${product.price}</p>\r\n              <button class=\"add-to-cart\" id=\"${product.id}\">Add to cart</button>\r\n              <a href=\"/\">Back to home</a>\r\n            </div>\r\n            `\r\n}\r\n"],"names":["$4zybi","parcelRequire","async","$5a337395b9052bfe$export$2e2bcd8739ae039","cart","JSON","parse","localStorage","getItem","document","title","products","getProducts","Object","keys","length","$eOHur","default","component","cartItems","map","id","product","find","Number","thumbnail","price","quantity","$6trHI","join","callback","buttonFinderRemove","$9f62b725e8071199$var$products","$9f62b725e8071199$var$db","response","fetch","ok","alert","status","console","error","json","$9f62b725e8071199$export$68a801b7b3c0bfaa","trace","data","$9f62b725e8071199$export$e2005c9600188ac7","$9f62b725e8071199$export$2342b8d835c798ac","spinner","createElement","classList","add","$dc1410702d496f1f$export$2e2bcd8739ae039","prop","location","pathname","$1GhVf","$f034656c1c6ff5c1$export$2e2bcd8739ae039","$f034656c1c6ff5c1$var$clickedImage","$f034656c1c6ff5c1$var$oldImage","style","viewTransitionName","$f034656c1c6ff5c1$var$addOldActiveClass","skipTransition","classNames","updateDOM","startViewTransition","updateCallbackDone","Promise","resolve","ready","reject","Error","finished","$f034656c1c6ff5c1$var$transitionHelper","$loKau","main","innerHTML","scrollTop","newImage","querySelector","$f034656c1c6ff5c1$var$addNewActiveClass","$f034656c1c6ff5c1$export$cc8a2c077702c36e","Array","from","querySelectorAll","forEach","button","alreadyAdded","addEventListener","e","target","addToCart","$f034656c1c6ff5c1$export$28a062edf2f82754","$f034656c1c6ff5c1$var$isFancyButton","removeFromCart","element","tagName","parentNode","HTMLAnchorElement","image","$aIKE6","$d726bdfbfe7dbea8$export$e79499a77ba07702","$d726bdfbfe7dbea8$export$2e2bcd8739ae039","cartCount","cartAmount","innerText","toString","values","item","reduce","a","b","toFixed","$d726bdfbfe7dbea8$export$576b6dd9d68b37bc","setItem","stringify","$d726bdfbfe7dbea8$export$afcd3788490386c5","$c9nz9","$e773eeb4c43845fc$export$f22da7240b7add18","$e773eeb4c43845fc$export$2e2bcd8739ae039","navigateEvent","canIntercept","hashChange","downloadRequest","formData","$e773eeb4c43845fc$var$shouldNotIntercept","log","url","destination","href","newURL","URL","path","nav","navOpen","display","mediaQuery","window","matchMedia","matches","intercept","preventDefault","searchValue","URLSearchParams","search","get","createSpinner","mainHTML","event","time","setTimeout","heading","textContent","outerHTML","$e773eeb4c43845fc$var$checkAndReplaceHTML","$g2M5J","HTMLInputElement","value","searchHandler","scroll","signal","onabort","Route","navigation","$d165de4694e1e063$var$imports","home","about","productpage","checkout","success","events","$d165de4694e1e063$var$Routes","dynamic","$d165de4694e1e063$export$e7b0ac011bb776c6","route","split","module","exports","all","import","then","$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","i","resolved","$1ce8005e2310b062$export$d76128d007d19019","$1ce8005e2310b062$export$1fb3504cdb9493ae","$1ce8005e2310b062$export$c9a1649f3f80793f","filteredProducts","filter","toLowerCase","includes","productsHTML","$i2Q06","buttonFinderAdd","$bc2538e1600ac322$export$2e2bcd8739ae039","description"],"version":3,"file":"Cart.f594d3c1.js.map"}